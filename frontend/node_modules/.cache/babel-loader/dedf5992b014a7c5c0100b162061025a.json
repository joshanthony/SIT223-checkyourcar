{"ast":null,"code":"var _jsxFileName = \"/Users/josh/Dropbox/Deakin/SIT223-Professional-Practice-In-IT/Group-Assignment/CheckYourCar/frontend/src/pages/Account.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { BrowserRouter as Router, Link, withRouter } from \"react-router-dom\";\nimport Cars from '../components/Cars/Cars';\nimport Spinner from '../components/Spinner/Spinner';\n\nclass Account extends Component {\n  constructor(props) {\n    super(props);\n\n    this.deleteResultHandler = id => {\n      const results = [...this.state.results];\n      results.splice(id, 1);\n      this.setState({\n        results: results\n      }); // TODO tell the server a result is deleted\n      // axios.defaults.headers = {\n      //     \"Content-Type\": \"application/json\",\n      //     Authorization: `Token ${this.props.token}`\n      // };\n      // axios\n      //     .delete(`http://127.0.0.1:8000/api/${id}/delete/`)\n      //     .then(res => {\n      //         if (res.status === 204) {\n      //             // TODO RETURN ERROR MESSAGE FOR VARIOUS ERROR CODES\n      //         }\n      //     })\n    };\n\n    this.state = {\n      results: [],\n      showResults: false,\n      loading: false,\n      isAuthenticated: this.props.isAuthenticated\n    };\n  }\n\n  static getDerivedStateFromProps(props, state) {\n    if (props.isAuthenticated !== state.isAuthenticated) {\n      return {\n        isAuthenticated: props.isAuthenticated\n      };\n    }\n\n    return null;\n  }\n\n  componentDidMount() {\n    const results = [{\n      \"id\": 1,\n      \"make\": \"Toyota\",\n      \"model\": \"Camry\",\n      \"year\": \"2019\",\n      \"issues\": [{\n        \"id\": 1,\n        \"name\": \"Airbag malfunction in 2007 serial numbers\",\n        \"description\": \"There has been a recall of all Toyota Camry cars with 2007 serial numbers\"\n      }, {\n        \"id\": 2,\n        \"name\": \"Airbag malfunction in 2008 serial numbers\",\n        \"description\": \"There has been a recall of all Toyota Camry cars with 2008 serial numbers\"\n      }]\n    }, {\n      \"id\": 2,\n      \"make\": \"Ford\",\n      \"model\": \"Fiesta\",\n      \"year\": \"2016\",\n      \"issues\": [{\n        \"id\": 1,\n        \"name\": \"Airbag malfunction in 2007 serial numbers\",\n        \"description\": \"There has been a recall of all Toyota Camry cars with 2007 serial numbers\"\n      }, {\n        \"id\": 2,\n        \"name\": \"Airbag malfunction in 2008 serial numbers\",\n        \"description\": \"There has been a recall of all Toyota Camry cars with 2008 serial numbers\"\n      }]\n    }]; // axios.defaults.headers = {\n    //     \"Content-Type\": \"application/json\",\n    //     Authorization: `Token ${this.props.token}`\n    // };\n    // axios\n    //     .get('http://127.0.0.1:8000/api/cars/')\n    //     .then(res => {\n    //         this.setState({ cars: res.data });\n    //     })\n    //     .catch(err => {\n    //         console.log(err);\n    //     });\n\n    this.setState({\n      results: results,\n      showResults: true\n    });\n  }\n\n  render() {\n    console.log(\"test \" + this.state.isAuthenticated);\n    let results = null;\n\n    if (this.state.showResults) {\n      results = /*#__PURE__*/React.createElement(Cars, {\n        results: this.state.results,\n        clicked: this.deleteResultHandler,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 23\n        }\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"Home\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      className: \"page-title display-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 25\n      }\n    }, \"My Account\"))), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"row justify-content-md-center mb-4 mt-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"col-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      className: \"btn btn-primary\",\n      to: \"/add\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 25\n      }\n    }, \"Add New Car\"), \" \", /*#__PURE__*/React.createElement(Link, {\n      className: \"btn btn-secondary\",\n      to: \"/account-settings\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 88\n      }\n    }, \"Manage Account\"))), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"row justify-content-md-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"col-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 21\n      }\n    }, this.state.loading ? /*#__PURE__*/React.createElement(Spinner, {\n      text: \"Loading...\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 47\n      }\n    }) : results, results)));\n  }\n\n}\n\nexport default withRouter(Account);","map":{"version":3,"sources":["/Users/josh/Dropbox/Deakin/SIT223-Professional-Practice-In-IT/Group-Assignment/CheckYourCar/frontend/src/pages/Account.js"],"names":["React","Component","axios","BrowserRouter","Router","Link","withRouter","Cars","Spinner","Account","constructor","props","deleteResultHandler","id","results","state","splice","setState","showResults","loading","isAuthenticated","getDerivedStateFromProps","componentDidMount","render","console","log"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport { BrowserRouter as Router, Link, withRouter } from \"react-router-dom\";\nimport Cars from '../components/Cars/Cars';\nimport Spinner from '../components/Spinner/Spinner';\n\nclass Account extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            results: [],\n            showResults: false,\n            loading: false,\n            isAuthenticated: this.props.isAuthenticated\n        };\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        if (props.isAuthenticated !== state.isAuthenticated) {\n          return {\n            isAuthenticated: props.isAuthenticated\n          };\n        }\n        return null;\n      }\n\n    componentDidMount() {\n        const results = [\n            {\n                \"id\": 1,\n                \"make\": \"Toyota\",\n                \"model\": \"Camry\",\n                \"year\": \"2019\",\n                \"issues\": [\n                    {\n                        \"id\": 1,\n                        \"name\": \"Airbag malfunction in 2007 serial numbers\",\n                        \"description\": \"There has been a recall of all Toyota Camry cars with 2007 serial numbers\"\n\n                    },\n                    {\n                        \"id\": 2,\n                        \"name\": \"Airbag malfunction in 2008 serial numbers\",\n                        \"description\": \"There has been a recall of all Toyota Camry cars with 2008 serial numbers\"\n                    }\n                ]\n            },\n            {\n                \"id\": 2,\n                \"make\": \"Ford\",\n                \"model\": \"Fiesta\",\n                \"year\": \"2016\",\n                \"issues\": [\n                    {\n                        \"id\": 1,\n                        \"name\": \"Airbag malfunction in 2007 serial numbers\",\n                        \"description\": \"There has been a recall of all Toyota Camry cars with 2007 serial numbers\"\n                    },\n                    {\n                        \"id\": 2,\n                        \"name\": \"Airbag malfunction in 2008 serial numbers\",\n                        \"description\": \"There has been a recall of all Toyota Camry cars with 2008 serial numbers\"\n                    }\n                ]\n            }\n        ]\n\n        // axios.defaults.headers = {\n        //     \"Content-Type\": \"application/json\",\n        //     Authorization: `Token ${this.props.token}`\n        // };\n\n        // axios\n        //     .get('http://127.0.0.1:8000/api/cars/')\n        //     .then(res => {\n        //         this.setState({ cars: res.data });\n        //     })\n        //     .catch(err => {\n        //         console.log(err);\n        //     });\n\n        this.setState({\n            results: results,\n            showResults: true\n        });\n    }\n\n    deleteResultHandler = (id) => {\n        const results = [...this.state.results];\n        results.splice(id, 1);\n        this.setState({results: results});\n\n        // TODO tell the server a result is deleted\n        // axios.defaults.headers = {\n        //     \"Content-Type\": \"application/json\",\n        //     Authorization: `Token ${this.props.token}`\n        // };\n        // axios\n        //     .delete(`http://127.0.0.1:8000/api/${id}/delete/`)\n        //     .then(res => {\n        //         if (res.status === 204) {\n        //             // TODO RETURN ERROR MESSAGE FOR VARIOUS ERROR CODES\n        //         }\n        //     })\n\n    }\n\n    render() {\n\n        console.log(\"test \" + this.state.isAuthenticated);\n\n        let results = null;\n\n        if(this.state.showResults) {\n            results = <Cars\n                results={this.state.results}\n                clicked={this.deleteResultHandler} />\n        }\n        return (\n            <div className=\"Home\">\n                <div class=\"row\">\n                    <div class=\"col\">\n                        <h1 className=\"page-title display-4\">My Account</h1>\n                    </div>\n                </div>\n                <div class=\"row justify-content-md-center mb-4 mt-4\">\n                    <div class=\"col-4\">\n                        <Link className=\"btn btn-primary\" to=\"/add\">Add New Car</Link> <Link className=\"btn btn-secondary\" to=\"/account-settings\">Manage Account</Link>\n                    </div>\n                </div>\n                <div class=\"row justify-content-md-center\">\n                    <div class=\"col-6\">\n                        {this.state.loading ? <Spinner text=\"Loading...\" /> : results}\n                        {results}\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default withRouter(Account);"]},"metadata":{},"sourceType":"module"}